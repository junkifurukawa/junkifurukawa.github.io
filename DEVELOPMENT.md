# ğŸ¹ ãƒãƒ å¤ªéƒã®Monorepoé–‹ç™ºã‚¬ã‚¤ãƒ‰

ã“ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã¯ã€è¤‡æ•°ã®ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’åŠ¹ç‡çš„ã«é–‹ç™ºã™ã‚‹ãŸã‚ã®ã‚¬ã‚¤ãƒ‰ãªã®ã ï¼

## ğŸ—ï¸ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£æ¦‚è¦

```
junkifurukawa.github.io/
â”œâ”€â”€ packages/
â”‚   â”œâ”€â”€ shared/           # å…±é€šãƒ©ã‚¤ãƒ–ãƒ©ãƒªãƒ»ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£
â”‚   â”œâ”€â”€ website/          # ãƒ¡ã‚¤ãƒ³ã®é™çš„ã‚µã‚¤ãƒˆ
â”‚   â”œâ”€â”€ like-button/      # Reactã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”‚   â””â”€â”€ [æ–°ã—ã„ã‚¢ãƒ—ãƒª]/    # ä»Šå¾Œè¿½åŠ ã™ã‚‹ã‚¢ãƒ—ãƒª
â”œâ”€â”€ scripts/              # é–‹ç™ºãƒ»ãƒ‡ãƒ—ãƒ­ã‚¤ã‚¹ã‚¯ãƒªãƒ—ãƒˆ
â””â”€â”€ package.json          # Monorepoè¨­å®š
```

## ğŸš€ æ–°ã—ã„ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®ä½œæˆ

### 1. ã‚¢ãƒ—ãƒªä½œæˆã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’ä½¿ç”¨

Reactã‚¢ãƒ—ãƒªã‚’ä½œæˆï¼š
```bash
yarn create-app my-new-app react
```

Next.jsã‚¢ãƒ—ãƒªã‚’ä½œæˆï¼š
```bash
yarn create-app my-dashboard nextjs
```

é™çš„ã‚µã‚¤ãƒˆã‚’ä½œæˆï¼š
```bash
yarn create-app my-landing static
```

Express.jsã‚µãƒ¼ãƒãƒ¼ã‚’ä½œæˆï¼š
```bash
yarn create-app my-api express
```

### 2. æ‰‹å‹•ã§ã‚¢ãƒ—ãƒªã‚’ä½œæˆ

packages/ é…ä¸‹ã«ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’ä½œæˆï¼š
```bash
mkdir packages/my-custom-app
```

package.jsonã‚’ä½œæˆï¼š
```bash
cd packages/my-custom-app
```
```bash
npm init -y
```

ãã®å¾Œã®æ‰‹é †ï¼š
1. package.jsonã® name ã‚’ `@junkifurukawa/my-custom-app` ã«å¤‰æ›´
2. å¿…è¦ãªä¾å­˜é–¢ä¿‚ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«  
3. ãƒ«ãƒ¼ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã§ yarn install ã‚’å®Ÿè¡Œï¼š
```bash
cd ../..
```
```bash
yarn install
```

## ğŸ“¦ å…±é€šãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®ä½¿ç”¨

### sharedãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ã‚¢ãƒ—ãƒªã§ä½¿ç”¨ã™ã‚‹

ã‚¢ãƒ—ãƒªãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ç§»å‹•ï¼š
```bash
cd packages/your-app
```

sharedãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’è¿½åŠ ï¼š
```bash
yarn add @junkifurukawa/shared@*
```

```typescript
// TypeScriptã‚¢ãƒ—ãƒªã§ã®ä½¿ç”¨ä¾‹
import { formatDate, ApiResponse, THEME_COLORS } from '@junkifurukawa/shared';

const formattedDate = formatDate(new Date());
const primaryColor = THEME_COLORS.PRIMARY;
```

### å…±é€šãƒ©ã‚¤ãƒ–ãƒ©ãƒªã«æ–°æ©Ÿèƒ½ã‚’è¿½åŠ 

sharedãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ã‚½ãƒ¼ã‚¹ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ç§»å‹•ï¼š
```bash
cd packages/shared/src
```

ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç·¨é›†ã—ãŸå¾Œã€ãƒ«ãƒ¼ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«æˆ»ã‚‹ï¼š
```bash
cd ../../..
```

ãƒ“ãƒ«ãƒ‰ã—ã¦ä»–ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã§åˆ©ç”¨å¯èƒ½ã«ã™ã‚‹ï¼š
```bash
yarn build-shared
```

## ğŸ”§ é–‹ç™ºãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼

### æ—¥å¸¸ã®é–‹ç™ºã‚³ãƒãƒ³ãƒ‰

å…¨ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ä¾å­˜é–¢ä¿‚ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ï¼š
```bash
yarn install-all
```

ç‰¹å®šã®ã‚¢ãƒ—ãƒªãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ç§»å‹•ï¼š
```bash
cd packages/your-app
```

é–‹ç™ºã‚µãƒ¼ãƒãƒ¼ã‚’èµ·å‹•ï¼š
```bash
yarn dev
```

å…¨ã‚¢ãƒ—ãƒªã®é–‹ç™ºã‚µãƒ¼ãƒãƒ¼ã‚’èµ·å‹•ï¼ˆè¦æ³¨æ„ï¼šãƒãƒ¼ãƒˆç«¶åˆã®å¯èƒ½æ€§ï¼‰ï¼š
```bash
yarn dev
```

ç‰¹å®šã®ã‚¢ãƒ—ãƒªã ã‘ãƒ†ã‚¹ãƒˆï¼š
```bash
yarn workspace @junkifurukawa/your-app run test
```

å…¨ã‚¢ãƒ—ãƒªã‚’ãƒ“ãƒ«ãƒ‰ï¼š
```bash
yarn build
```

### æ¨å¥¨é–‹ç™ºãƒ•ãƒ­ãƒ¼

1. **æ©Ÿèƒ½é–‹ç™ºå‰**

æ–°ã—ã„ãƒ–ãƒ©ãƒ³ãƒã‚’ä½œæˆï¼š
```bash
git checkout -b feature/new-feature
```

ä¾å­˜é–¢ä¿‚ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ï¼š
```bash
yarn install-all
```

2. **å…±é€šæ©Ÿèƒ½ã‚’è¿½åŠ ã™ã‚‹å ´åˆ**

å…±é€šãƒ©ã‚¤ãƒ–ãƒ©ãƒªãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ç§»å‹•ï¼š
```bash
cd packages/shared
```

ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç·¨é›†ã—ãŸå¾Œã€ãƒ“ãƒ«ãƒ‰ï¼š
```bash
yarn build
```

ä»–ã®ã‚¢ãƒ—ãƒªãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ç§»å‹•ï¼š
```bash
cd ../your-app
```

é–‹ç™ºã‚µãƒ¼ãƒãƒ¼ã‚’èµ·å‹•ï¼š
```bash
yarn dev
```

3. **æ–°ã—ã„ã‚¢ãƒ—ãƒªã‚’è¿½åŠ ã™ã‚‹å ´åˆ**

æ–°ã—ã„ã‚¢ãƒ—ãƒªã‚’ä½œæˆï¼š
```bash
yarn create-app new-app react
```

ã‚¢ãƒ—ãƒªãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ç§»å‹•ï¼š
```bash
cd packages/new-app
```

é–‹ç™ºã‚µãƒ¼ãƒãƒ¼ã‚’èµ·å‹•ï¼š
```bash
yarn dev
```

## ğŸš€ ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆ

### GitHub Pagesã«websiteã‚’ãƒ‡ãƒ—ãƒ­ã‚¤

websiteã‚’GitHub Pagesç”¨ã«æº–å‚™ï¼š
```bash
./scripts/deploy.sh website github-pages
```

å¤‰æ›´ã‚’ã‚¹ãƒ†ãƒ¼ã‚¸ãƒ³ã‚°ï¼š
```bash
git add .
```

ã‚³ãƒŸãƒƒãƒˆï¼š
```bash
git commit -m "Deploy website"
```

ãƒ—ãƒƒã‚·ãƒ¥ï¼š
```bash
git push origin main
```

### æœ¬ç•ªç’°å¢ƒå‘ã‘ãƒ“ãƒ«ãƒ‰

å…¨ã‚¢ãƒ—ãƒªã‚’æœ¬ç•ªç”¨ã«ãƒ“ãƒ«ãƒ‰ï¼š
```bash
./scripts/deploy.sh production
```

ãƒ“ãƒ«ãƒ‰çµæœã‚’ç¢ºèªï¼š
```bash
ls dist/
```

## ğŸ“ ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ ã®ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹

### å„ã‚¢ãƒ—ãƒªã®package.json

```json
{
  "name": "@junkifurukawa/your-app",
  "version": "1.0.0",
  "private": true,
  "scripts": {
    "dev": "é–‹ç™ºã‚µãƒ¼ãƒãƒ¼èµ·å‹•ã‚³ãƒãƒ³ãƒ‰",
    "build": "æœ¬ç•ªç”¨ãƒ“ãƒ«ãƒ‰ã‚³ãƒãƒ³ãƒ‰",
    "test": "ãƒ†ã‚¹ãƒˆå®Ÿè¡Œã‚³ãƒãƒ³ãƒ‰",
    "clean": "ãƒ“ãƒ«ãƒ‰æˆæœç‰©å‰Šé™¤ã‚³ãƒãƒ³ãƒ‰"
  }
}
```

### æ¨å¥¨ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ 

```
packages/your-app/
â”œâ”€â”€ src/                  # ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰
â”œâ”€â”€ public/              # é™çš„ãƒ•ã‚¡ã‚¤ãƒ«
â”œâ”€â”€ build/ or dist/      # ãƒ“ãƒ«ãƒ‰çµæœ
â”œâ”€â”€ package.json         # ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸è¨­å®š
â”œâ”€â”€ README.md           # ã‚¢ãƒ—ãƒªå›ºæœ‰ã®README
â””â”€â”€ .env.example        # ç’°å¢ƒå¤‰æ•°ã®ã‚µãƒ³ãƒ—ãƒ«
```

## ğŸ”„ ä¾å­˜é–¢ä¿‚ç®¡ç†

### Workspacesé–“ã®ä¾å­˜é–¢ä¿‚

```bash
# ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸AãŒãƒ‘ãƒƒã‚±ãƒ¼ã‚¸Bã‚’å‚ç…§ã™ã‚‹å ´åˆ
cd packages/package-a
yarn add @junkifurukawa/package-b@*

# ä¾å­˜é–¢ä¿‚ã‚’æ›´æ–°
yarn install
```

### å¤–éƒ¨ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ç®¡ç†

```bash
# ç‰¹å®šã®ã‚¢ãƒ—ãƒªã«ä¾å­˜é–¢ä¿‚ã‚’è¿½åŠ 
yarn workspace @junkifurukawa/your-app add package-name

# å…¨ã‚¢ãƒ—ãƒªã§å…±é€šã®ä¾å­˜é–¢ä¿‚ã‚’ãƒ«ãƒ¼ãƒˆã«è¿½åŠ 
yarn add -W package-name
```

## ğŸ§ª ãƒ†ã‚¹ãƒˆæˆ¦ç•¥

### ã‚¢ãƒ—ãƒªå˜ä½ã§ã®ãƒ†ã‚¹ãƒˆ

```bash
# ç‰¹å®šã®ã‚¢ãƒ—ãƒªã®ãƒ†ã‚¹ãƒˆ
yarn workspace @junkifurukawa/your-app run test

# å…¨ã‚¢ãƒ—ãƒªã®ãƒ†ã‚¹ãƒˆ
yarn test
```

### å…±é€šãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®ãƒ†ã‚¹ãƒˆ

```bash
# sharedãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ãƒ†ã‚¹ãƒˆ
yarn workspace @junkifurukawa/shared run test
```

## ğŸ¯ ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–

### ãƒ“ãƒ«ãƒ‰æ™‚é–“ã®çŸ­ç¸®

1. **å¢—åˆ†ãƒ“ãƒ«ãƒ‰**: å¤‰æ›´ã•ã‚ŒãŸãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ã¿ãƒ“ãƒ«ãƒ‰
2. **ä¸¦åˆ—å®Ÿè¡Œ**: å¯èƒ½ãªé™ã‚Šä¸¦åˆ—ã§ã‚¿ã‚¹ã‚¯ã‚’å®Ÿè¡Œ
3. **ã‚­ãƒ£ãƒƒã‚·ãƒ¥æ´»ç”¨**: node_modules ã‚„ dist ã®ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’æ´»ç”¨

### æœ¬ç•ªç’°å¢ƒã§ã®æœ€é©åŒ–

1. **Tree Shaking**: æœªä½¿ç”¨ã‚³ãƒ¼ãƒ‰ã®å‰Šé™¤
2. **Code Splitting**: å¿…è¦ãªéƒ¨åˆ†ã®ã¿ãƒ­ãƒ¼ãƒ‰
3. **Static Asset Optimization**: ç”»åƒãƒ»CSSãƒ»JSã®æœ€é©åŒ–

---

ğŸ¹ **ãƒãƒ å¤ªéƒã‹ã‚‰ã®ã‚¢ãƒ‰ãƒã‚¤ã‚¹**: æ–°ã—ã„ã‚¢ãƒ—ãƒªã‚’ä½œã‚‹æ™‚ã¯ã€ã¾ãšå°ã•ãå§‹ã‚ã¦ã€å…±é€šæ©Ÿèƒ½ã¯ `shared` ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã«æŠ½å‡ºã™ã‚‹ã®ãŒãŠã™ã™ã‚ãªã®ã ï¼ 